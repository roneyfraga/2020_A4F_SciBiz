---
title: "A4F - Shelf Life"
output: 
  flexdashboard::flex_dashboard:
    navbar:
      - { title: "<b>Research</b>", href: "http://roneyfraga.com/dash/2020_A4F", align: right }
      - { title: "People", href: "http://roneyfraga.com/dash/2020_A4F/#people", align: right }
      - { title: "Patent", href: "http://roneyfraga.com/dash/2020_A4F/#patent", align: right }
      - { title: "About", href: "http://roneyfraga.com/", align: right }
    social: [ "menu" ]
    source_code: "embed"
    theme: bootstrap #yeti #lumen
    logo: img/logo.png
runtime: shiny
---

<!--
Opções no chunk

eval        incluir o resultado do código executado, pode ser logico ou numérico
echo        mostrar o código 
warning     mostrar mensagens de aviso
error       mostrar mensagens de erro
message     mostrar mensagens
tidy        mostrar ajustar o código ao display, ignora identação
comment     '##' ou qq símbolo, para os resultados dos códigos serem antecedidos por ##
include     se falso, executa mas não inclui o chunk no relatório
-->

```{r setup, include=FALSE}
options(scipen=999)
library(rmarkdown)
library(flexdashboard)
library(pipeR)
library(tidyverse)
library(rio)
library(ggraph)
library(tidygraph)
library(DT)
library(visNetwork)
library(igraph)
library(highcharter)
library(htmlwidgets)
library(printr)
library(shiny)
```

# General 


Column {data-width=500 .tabset}
-------------------------------------


### Target

<br> </br>
<h3>  Qual área de pesquisa é emergente?  </h3> 
<br> </br>
<h3>  Qual pesquisador contratar?  </h3> 
<br> </br>
<h3>  Qual patente comprar?  </h3> 
<br> </br>


### Growth

```{r}

import('data/growth_shelf_life.rds') %>>% (. -> d2)

hchart(d2, "column", hcaes(x = Year, y = Publications), name = "Publications", showInLegend = TRUE) %>>%
    hc_add_series(d2, "line", hcaes(x = Year, y = predicted), name = "Predicted", showInLegend = TRUE) %>>% 
    hc_add_theme(hc_theme_elementary()) %>>%
    hc_navigator( enabled = TRUE)  %>>% 
    hc_exporting( enabled = TRUE, filename='groups_growth')
```


### Networks

```{r}

import('data/networks.rds') %>>% 
    (~ .$nodes -> nodes) %>>% 
    (.$edges -> edges)

visNetwork(nodes, edges, height = "700px", width = "100%", main = as.character(max(nodes$PY))) %>%
    visNodes(size = 10, shape='dot') %>>% 
    visEdges(width = 2, hidden=F)  %>>% 
    visOptions(selectedBy = "group", highlightNearest = TRUE, nodesIdSelection = F) %>>%  
    visPhysics(stabilization = T) %>>% 
    visGroups(groupname = "g01", color = "#38501e") %>>% 
    visGroups(groupname = "g02", color = "#23331e") %>>% 
    visGroups(groupname = "g03", color = "#6e1d21") %>>% 
    visGroups(groupname = "g04", color = "#472926") %>>% 
    visGroups(groupname = "g05", color = "#926433") %>>% 
    visGroups(groupname = "g06", color = "#a90a26") %>>% 
    visGroups(groupname = "g07", color = "#97863e") %>>% 
    visGroups(groupname = "g08", color = "#00FFFF") %>>% 
    visGroups(groupname = "g09", color = "#d48d01") %>>% 
    visGroups(groupname = "g10", color = "#021338") %>>% 
    visGroups(groupname = "g11", color = "#e6d82e") %>>% 
    visGroups(groupname = "g12", color = "#9eb739") %>>% 
    visGroups(groupname = "g13", color = "#808080") 
```


### Groups Attributes
    
```{r}
import('data/groups_attributes.rds') %>>% 
    datatable(extensions = 'Buttons', 
              options = list( dom = 'Bfrtip',
                             buttons = list(list( 
                                                 extend='collection', 
                                                 buttons = list(list(extend='csv',filename='data'),
                                                                list(extend='excel',filename='data')),
                                                 text='Download')))) %>>% 
    formatRound('GrowthRateYear',1)
```




Column {data-width=500 .tabset}
-------------------------------------

### Shelf Life

<br> </br>

<h4>  Adicionar uma sentença sobre Shelf Life, para catecterizar a área de pesquisa.  </h4> 

<br> </br>

> - __Shelf Life__
> - 13,516 Registers \n
> - 12.9% Growth Rate  \n
> - 5.6 Years Doubling Time \n

<br> </br>

> - __Scopus__
> - 52,000,000 Registers \n
> - 4.13% Growth Rate  \n
> - 17 Years Doubling Time \n

>

### Segmented Growth

<!-- Talvez fazer esse gráfico no ggplot2  -->

```{r, out.width='75%'}

import('data/segmented_growth.rds') %>>% (. -> d2)

hchart(d2, "line", hcaes(x = Year, y = ln_Publications), name = "Publications", showInLegend = TRUE, fillOpacity = 0.2) %>>% 
    hc_add_series(d2, "line", hcaes(x = Year, y = est), name = "Segmented Regression", showInLegend = TRUE, fillOpacity = 0.2) %>>% 
    hc_add_theme(hc_theme_elementary()) %>>% 
    hc_navigator( enabled = TRUE) %>>% 
    hc_exporting( enabled = TRUE, filename='segmented_growth') %>>% 
    hc_xAxis( plotBands = list( list( from = 1986, to = 1986, color = "#330000" ),
                                list( from = 1992, to = 1992, color = "#330000" ),
                                list( from = 2004, to = 2004, color = "#330000" )
                               ))
```


### Groups Growth
    
```{r}
import('data/groups_growth.rds') %>>% (. -> groups_growth)

hchart(groups_growth, "line", hcaes(x = Year, y = Publications, group = Group), fillOpacity = 0.2) %>>% 
    hc_add_theme(hc_theme_elementary())  %>>% 
    hc_navigator( enabled = TRUE)  %>>% 
    hc_exporting( enabled = TRUE, filename='groups_growth')
```


### Groups Description
    
```{r}
data.frame(Group=paste0('g',1:13),Description='algum texto para descrever o grupo') %>>% 
    datatable(extensions = 'Buttons', 
              options = list( dom = 'Bfrtip',
                             buttons = list(list( 
                                                 extend='collection', 
                                                 buttons = list(list(extend='csv',filename='data'),
                                                                list(extend='excel',filename='data')),
                                                 text='Download'))))
```


# g01 {data-navmenu="Groups"}
    
### Aplicação `shiny`

```{r echo=F, eval=T}
numericInput("obs", label = "Number of carbs:", 2, min=1, max=8)

show_mtcars <- reactive({
    mtcars %>>% 
        dplyr::filter(carb == input$obs)
})

renderTable(show_mtcars())

```

# g02 {data-navmenu="Groups"}

### quadro limpo

> insert text here!

# Conclusions

Escrever algum texto para finalizar a análise.


# People  {.hidden}

Adicionar os grandes números do Lattes. 


# Patent  {.hidden}

Em construção.


